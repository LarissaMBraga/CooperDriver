<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>App de Localiza√ß√£o</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      background-color: #068106;
      color: white;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    #app-container {
      width: 100%;
      max-width: 500px;
      padding: 20px;
      text-align: center;
    }
    .campo {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 10px auto;
    }
    .campo label {
      margin-right: 10px;
      font-size: 0.9rem;
    }
    .campo input[type="text"] {
      padding: 6px;
      width: 40%;
      border: none;
      border-radius: 5px;
      font-size: 0.85rem;
    }
    .label {
      margin-top: 15px;
      font-weight: bold;
      font-size: 0.95rem;
    }
    .info {
      font-size: 0.85rem;
      margin-bottom: 5px;
    }
    button {
      margin: 10px 5px;
      padding: 10px 20px;
      font-size: 1rem;
      background-color: white;
      color: #007BFF;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      opacity: 0.9;
    }
    #navegacao {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    #navegacao button {
      background-color: #068106;
      color: white;
      border: none;
    }
    #historico {
      display: none;
    }
    #historico h3 {
      position: sticky;
      top: 0;
      background-color: #068106;
      margin: 0;
      padding: 10px;
    }
    .card {
      background: white;
      color: black;
      padding: 10px;
      margin: 10px auto;
      border-radius: 10px;
      width: 90%;
      text-align: left;
      position: relative;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    .lixeira {
      position: absolute;
      top: 10px;
      right: 10px;
      background: red;
      color: white;
      border: none;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="app-container">
    <div id="principal">
      <div class="campo">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" placeholder="Nome" />
      </div>
      <div class="campo">
        <label for="valor">Valor:</label>
        <input type="text" id="valor" placeholder="Valor" value="25" />
      </div>

      <div class="label">Localiza√ß√£o inicial:</div>
      <div id="localizacaoInicial" class="info">Carregando...</div>

      <div class="label">Localiza√ß√£o final:</div>
      <div id="localizacaoFinal" class="info">Aguardando...</div>

      <div class="label">Hor√°rio:</div>
      <div class="info"><strong>Inicial:</strong> <span id="horaInicial">--:--:--</span></div>
      <div class="info"><strong>Final:</strong> <span id="horaFinal">--:--:--</span></div>

      <button id="btnIniciar">Iniciar</button>
      <button id="btnCancelar" style="display:none">Cancelar</button>
    </div>

    <div id="historico">
      <h3>Hist√≥rico</h3>
      <div id="cards"></div>
    </div>

    <div id="navegacao">
      <button onclick="mostrarTela('principal')">Entregas</button>
      <button onclick="mostrarTela('historico')">Hist√≥rico</button>
    </div>
  </div>

  <script>
    const btnIniciar = document.getElementById("btnIniciar");
    const btnCancelar = document.getElementById("btnCancelar");
    const nomeInput = document.getElementById("nome");
    const valorInput = document.getElementById("valor");
    const localizacaoInicial = document.getElementById("localizacaoInicial");
    const localizacaoFinal = document.getElementById("localizacaoFinal");
    const horaInicial = document.getElementById("horaInicial");
    const horaFinal = document.getElementById("horaFinal");
    const cardsContainer = document.getElementById("cards");

    let rodando = false;
    let dadosIniciais = {};

    function mostrarTela(tela) {
      document.getElementById("principal").style.display = tela === 'principal' ? 'block' : 'none';
      document.getElementById("historico").style.display = tela === 'historico' ? 'block' : 'none';
    }

    function formatarHora(data) {
      return data.toLocaleTimeString('pt-BR');
    }

    function obterLocalizacao(callback) {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          pos => {
            const coords = `Lat: ${pos.coords.latitude.toFixed(4)}, Lng: ${pos.coords.longitude.toFixed(4)}`;
            callback(coords);
          },
          () => callback("N√£o dispon√≠vel")
        );
      } else {
        callback("Geolocaliza√ß√£o n√£o suportada");
      }
    }

    btnIniciar.addEventListener("click", () => {
      if (!rodando) {
        obterLocalizacao(coords => {
          localizacaoInicial.textContent = coords;
          horaInicial.textContent = formatarHora(new Date());
          dadosIniciais = {
            nome: nomeInput.value,
            valor: valorInput.value,
            localizacaoInicial: coords,
            horaInicial: formatarHora(new Date())
          };
          rodando = true;
          btnIniciar.textContent = "Finalizar";
          btnCancelar.style.display = "inline-block";
        });
      } else {
        obterLocalizacao(coords => {
          localizacaoFinal.textContent = coords;
          horaFinal.textContent = formatarHora(new Date());

          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
            <strong>${dadosIniciais.nome || 'Sem nome'}</strong><br>
            Valor: R$ ${dadosIniciais.valor}<br>
            In√≠cio: ${dadosIniciais.horaInicial} - ${dadosIniciais.localizacaoInicial}<br>
            Fim: ${formatarHora(new Date())} - ${coords}
            <button class="lixeira" onclick="this.parentElement.remove()">üóëÔ∏è</button>
          `;
          cardsContainer.prepend(card);

          rodando = false;
          btnIniciar.textContent = "Iniciar";
          btnCancelar.style.display = "none";
        });
      }
    });

    btnCancelar.addEventListener("click", () => {
      nomeInput.value = "";
      valorInput.value = "25";
      localizacaoInicial.textContent = "Carregando...";
      localizacaoFinal.textContent = "Aguardando...";
      horaInicial.textContent = "--:--:--";
      horaFinal.textContent = "--:--:--";
      rodando = false;
      btnIniciar.textContent = "Iniciar";
      btnCancelar.style.display = "none";
    });
  </script>
</body>
</html>
